# 글로벌 서비스 개발하기

고명석 님

NCSoft,  인도네시아 스타트업 재직 경험 위주로 설명

- NCSoft
  - Aion 
  - 국제화작업 / 지역화작업 일부
- Cashtree (잠금화면 광고/리워드 서비스)
  - 인도네시아 현지 서비스
  - 1300만 유저 서비스
  - 인도네시아, 영어, 한글 지원
  - 지역화 작업 위주



## 사례1 - 단어 번역 이슈

**최저거래가**

Niedrigster Transaktionspreis (독일어, 최저 거래가)

=> Mindestpreis

Prix de transaction minimum (프랑스어, 최저거래가)

=> Prixmin



**평균거래가**

Average Price 

Prix moyen

Durch-schnittspreis

=> 줄바꿈처리 (UI 변경 작업: 1줄->2줄)

​	 Durch-

​	schnittspreis

**아이템**

Gegenstand -> Ggst (독일어, 아이템)



### 고려해야 할 부분

1. 동적으로 크기가 변하도록 레이아웃을 잡아도 문제가 발생한다

2. 그런 경우 단어를 줄일 수 밖에 없는데, 해당 언어에 능통한 전문 번역인이 필요하다.
3. 줄일 수 없는 단어의 경우 레이아웃 수정이 불가피하다



### 사례2 - 리소스 번역 방식 차이

2009 : MS Excel + Mail

- 리소스를 MS Excel에 정리
- 메일로 북미 직원에게 전송
- 북미직원이 수정해서 메일로 회신
- 수정된 리소스 하나하나 확인해서 반영
- 총 3일 소요

2017 : Google (Bold체 자동화)

-  **spreadsheet** 리소스 입력

- 현지 직원이 시트에 번역작업
- Admin page 에서 **Spreadsheet 연동하여** iOS/AOS 파일 형식으로 **일괄 Export**
- 프로젝트에 파일 단위로 복붙
- 하루 업무시간 이내



**고려해야 할 부분**

- 번역 리소스를 적용하는 작업은 생각보다 자주 발생하고 시간이 들어가는 작업

- **최대한 자동화하여 시간+리소스를 최소화**할것

- 번역된 리소스는 **화면을 통한 확인이 필요**

- 테스트를 위해 앱 내부에 언어설정을 변경할 수 있는 디버그 옵션 제공





## 사례3 (Cashtree) - 금요일마다 생기는 트래픽 이상

- 금요일마다 트래픽이 증가하여..
- 원인분석
  - 현지 통신사 문제?
    - 모든 통신사가 동시에?
    - 점검을 굳이 낮에하나?
    - 다른 서비스도 비슷한 현상이 발생
  - 실제 원인 : **이슬람 종교 기도시간과 겹침!!**
    - 이슬람(87%)
    - 하루에 5번 기도
    - 보통 시간이 정해져있으나 모두가 정확하게 지키진 않음
    - But, **금요일 정오기도는 모스크라는 장소에서 예배형식으로 진행**됨
    - 모든 건물에는 모스크가 있으며, 함께 모여서 예배
    - 기도하는 동안 트래픽 급락, 기도가 끝나면 트래픽이 급등



## 사례 4 자주 끊어지는 모바일 네트워크

- 통신사의 낮은 서비스 지역 커버리지
  - 체감상 1시간 자동차 주행간 10번이상의 끊김 발생
  - 국토 면적이 남한의 19배
- 리워드를 얻기 위해서는 잠금화면을 통해 실제 앱에 들어와서...
  - 매번 사용자의 요청에 대해 네트워크를 통해 광고 데이터 등을 전달받음
  - 네트워크 오류로 인한 손실이슈
- 전체 서비스중인 광고를 로컬 DB에 놔두고, 잠금화면 해제할 때 로컬 DB로 접속하도록 하여 네트워크 오류 리스크 줄임
  - 여기에 더해서, 네트워크 오류에 대응하기 위한 UI 체크 (다시 시도할 수 있는 UI 등을 최대한 제공해야)



## 사례5 느린 모바일 네트워크 속도

- 한국과 10배이상 차이나는 현지 네트워크 속도
- WebP 이미지 포맷을 적극적으로 활용한다.
  - Andriod 3.2 이상
  - 손실 압축 가능, 압축률 높음, 투명색 지원
  - png 대비 30% 용량 절감
  - 앱 내부 모든 이미지 리소스를 WebP 포맷으로 변경
  - **AWS S3에 이미지 올릴 때 이미지 품질에 따른 파일 용량 확인후에 적당한 품질로 변환**
  - iOS Safari, Safari는 지원 x —> 다른 이미지 포맷으로 대체
  - 안드로이드 브라우저, 크롬, 크롬 안드로이드, 파폭, 등은 지원



## 사례6 업데이트 이후 급격하게 떨어지는 평점

- 업데이트 버전에 문제가 있나?
- **늘어난 앱 용량으로 인한 평점 저하**
  - 4MB -> 6MB
  - 늘어난 앱 용량만큼 데이터 요금을 달라는 유저 피드백
    - 롤백함...

- 앱 용량 줄이기
  - 최대한 이미지 줄이기
    - 9-Patch, Vector drawble
  - 프로가든 등 적극 활용 (필기 보충 필요)
- 타사는 경량 앱 제공
  - Facebook Lite : 1.5MB
  - Line Lite : 6.5MB
- **사례 7 - 잦은 업데이트로 인한 평점 저하..**
  - 선불 유심 사용하는 현지 요금체계 (1GB = 1000원)
  - 특정 지역(Lokal) 에서만 쓸 수 있는 네트워크, 심야 요금제, Video 등 사용시..에 따라 다르다
  - 평균 임금이 한국 대비 1/5 수준인데, 평균 통신비 수준은 0.8배정도로 체감 통신비가 높다.
- 고려할 점
  - **적절한 주기**로 업데이트
    - 핫픽스는 어쩔 수 없다
  - **앱 데이터 사용량, 배터리 사용량**도 주된 평점 하락의 요인으로 모니터링 대상



## 사례 8 듀얼 유심 디바이스

유심카드가 2개, 폰번호 2개 ==> 통신사가 2개 가능

Slot 1 / Slot 2 또는 메인/Sub Slot으로 구분

슬롯별로 통화/데이터 구분하여 설정 가능함

- Slot 1은 통화, 2는 데이터
- Slot 1이 통화중일때, Slot2에 전화가 오면 부재중전화로 기록되는 방식



### 듀얼유심 방식

- 싱글 스탠바이 (SSDS)
  - 둘 중 하나만 작동준비
- 듀얼스탠바이 (DSDS)
  - 둘다 언제든 작동할 준비를 하고 있으나, 둘중 하나가 사용중이면 다른 하나는 작동을 멈추는 형식



**아이폰 듀얼 유심**

XS, XS Max에서 가능

DSDS 방식

케냐, 인도, 방글라데시, 인디 등 80%넘게 듀얼 유심 사용

중국도 64%가 넘음

자료 : MOVR 



### 듀얼유심 사용 이유 (1) - 통신사마다 서비스 지역 커버리지가 다르다.

### 듀얼유심 사용 이유  (2) - 신 데이터 요금에 민감함

- 과거에는 같은 통신사끼리 통화가 무료라서, 걸려온 전화의 통신사 확인 후 받지 않고, 해당 통신사의 유심으로 교체하여 전화를 수신/발신하는게 현지의 통화예절이었음 
- 최근에는 통신사끼리 매달 경쟁적으로 선불 유심에 대한 데이터 플랜을 행사 진행
  - 사용자는 해당월에 가장 유리한 데이터 플랜을 구매하여 사용



듀얼 유심 - 개발

- TelephonyManager
  - 하나의 유심 정보만 가져올 수 있음
  - 가져온 정보가 Main/Sub slot 어느쪽인지 불확실
- SubscriptionManager
  - 안드로이드 API 22 이상
- 안드로이드 API 22 미만은 Java reflection
  - 디바이스 제조사마다 다른 이름으로 제공하므로 찾아야 한다...

private static String[] predictedSimSerialMethodNames = {

   "aaaa", "bbbb" , "cccc"

}



얻을 점

- 사용자의 핸드폰 번호가 자주 변경될 수 있음을 고려하고 회원설계

- 유심정보가 필요한 경우 API 22 이상 지원하는 것을 권장
- 인도네시아에 동시에 진출한 카카오톡 vs 라인
  - 번호기반 vs 회원정보 기반
  - 현지화 실패 / 성공



## 사례 9 낮은 결제율

- 카드 사용자 비율이 낮음
- 인도네시아 6.7% vs S.Korea 54%
- 유료 결제 수익모델이 활발하지 않음

**광고를 통한 수익 창출이 대세**

- 대부분의 앱들이 하고 있어서 사용자의 거부감이 덜한 편



## 사례 10 이런 디바이스도 있구나...

- 앱이 하나만 설치될 정도로 용량이 부족한 디바이스
  - 앱 용량 부족 오류에 대비..

- 아주 작은 화면의 디바이스
  - 최소 지원 화면 사이즈를 정하고 대응한다.

- Device ID 값이 같은 디바이스
  - 부정 사용자 or 에뮬레이터가 아니라 제조사 실수로 인한 문제일 수도 있다.
- 높은 비율의 낮은 OS 버전 사용자들
  - Android 2.x 사용자가 전체 사용자의 5%, 전체 재화의 10% 차지 (2015~2016 기준)
    - 이 분들 지원하려고 하기엔 개발 리소스 낭비가 심함..
  - 최소 지원 버전에 대한 사업적 결정이 필요함
- 현재 And 버전 점유율(사진)
  - 최신버전 안드 (9.0+) 이 적음
- Android  : iOS
  - 인디 93% : 5% || 대한민국 72%: 27%
    - but, iOS 이용자의 매출 기여도가 절반에 가까움.
- 사례 12 부정사용자 (에뮬레이터를 이용하여 리워드 수령)
  - 한 디바이스에 앱을 2개이상 설치하고 중복 리워드 수령
  - 가짜 설치파일을 설치하고, CPI 리워드 수령
    - 용량 작은 설치파일을 만들어서 배포
    - AppId 외에도 설치한 App의 Size도 체크
    - CPE모델(설치 후 실행한 경우에만 리워드 제공)
- 범법 행위에 대한 죄책감이 없다
  - **해당 어뷰징을 막지 못하는 서비스의 잘못**이다. (현지 직원들 인식조차..)



## 사례 13 구글 ID를 공유해서 사용하는 사용자들

### 원인 

- 유료앱을 같이 사용하기 위해 지인끼리 Google ID를 공유

- 핸드폰 판매업자가 Google ID를 제공 

###참고

- Google ID로 본인 확인 같은 서비스 제공이 불가



# 체크리스트

### 국제화는 꼭 해야 하는가?

- 개발 기간은 충분한가?
  - 지원하는 언어 숫자의 배수로 작업이 증가한다. 

### 해당 언어의 전문 번역 인력은 존재하는가?

- 어설픈 번역은 신뢰도 하락의 요인이 될 수 있다.





### 국제화 단계

1. 지원언어 정하기

2. 지원 언어중 기본언어 정하기

3. 리소스 분리 : 문자, 이미지, 음성파일...

4. 번역하기 : Google SpreadSheet를 이용하여 자동화
   - 최대한 자동화하여 리소스를 절약하자

5. 리소스 적용

6. UI 수정



### 지역화 단계

- 영향을 크게 주는 부분
  - **`언어 / 종교(문화, 정서) / 소득`** 에 따라 앱의 사용 행태가 달라진다.
- 지역화는 앞선 사례와 같은 많은 변수가 존재하므로, **`현지에서 직접`** 하는 것을 추천



https://www.woowahan.com/#recruit/tech



결제는 어떻게 처리하는게 좋을까?

- 현지 PG를 위해 카드사 등 연계는 가능...
- 편의점에서 구매가능한 구글 gift card를 통해 충전하는 방식으로 결제하는게 있음
- 현물거래나 통신비 통한 결제, 계좌이체 등

SIM의 폰번호를 바탕으로 자동로그인? —> 앞서 말한 유심 변경에 대한 이슈 있음

- SIM 로그인시 기존 회원정보로 로그인 가능하도록 하는 계정 정보 설정이 필요.

Wifi 체감률은 낮음

- indoor 가정내 무선 네트워크 활용등이 잦음